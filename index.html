<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë‘ë”ì§€ ì¡ê¸° & ë¦¬ë”ë³´ë“œ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    font-family: 'Arial Black', sans-serif;
    background: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1 {
    margin: 16px 0 8px;
    font-size: 36px;
    text-shadow: 0 0 8px #ff0, 0 0 16px #f00;
  }

  .info {
    display: flex;
    gap: 30px;
    margin-bottom: 16px;
    font-size: 20px;
  }

  .board {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-gap: 12px;
  }

  .hole {
    width: 100px;
    height: 100px;
    background: #333;
    border-radius: 50%;
    position: relative;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 0 8px #0ff inset, 0 0 4px #fff inset;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  .mole {
    width: 80px;
    height: 80px;
    background: brown;
    border-radius: 50%;
    position: absolute;
    bottom: -80px;
    left: 10px;
    transition: bottom 0.15s;
    box-shadow: 0 0 10px #ff0;
  }

  .hole.up .mole {
    bottom: 10px;
  }

  button {
    margin: 8px;
    padding: 12px 24px;
    font-size: 18px;
    cursor: pointer;
    background: linear-gradient(45deg, #ff0, #f00);
    border: none;
    border-radius: 8px;
    color: #000;
    font-weight: bold;
    box-shadow: 0 0 12px #ff0, 0 0 24px #f00;
  }

  .leaderboard {
    margin-top: 32px;
    width: 320px;
    background: #111;
    border: 2px solid #ff0;
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 0 16px #ff0;
  }

  .leaderboard h2 {
    text-align: center;
    margin-bottom: 12px;
    color: #ff0;
    text-shadow: 0 0 6px #f00;
  }

  .medals {
    display: flex;
    justify-content: space-around;
    margin-bottom: 16px;
  }

  .medal {
    font-size: 32px;
    text-align: center;
    min-width: 90px;
  }

  .rank-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .rank-list li {
    display: flex;
    justify-content: space-between;
    padding: 6px 8px;
    border-bottom: 1px solid #444;
    font-size: 18px;
  }

  .warn {
    margin-top: 10px;
    font-size: 12px;
    color: #bbb;
    opacity: 0.9;
    text-align: center;
  }
</style>
</head>
<body>

<h1>ğŸ¹ ë‘ë”ì§€ ì¡ê¸°</h1>

<div class="info">
  <div>ì ìˆ˜: <span id="score">0</span></div>
  <div>ì‹œê°„: <span id="time">30</span>s</div>
</div>

<div class="board" id="board">
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
  <div class="hole"><div class="mole"></div></div>
</div>

<div>
  <button id="startBtn">ê²Œì„ ì‹œì‘</button>
</div>

<div class="warn">â€» ê²Œì„ ì¤‘ ë‹¤ë¥¸ ì°½/íƒ­ìœ¼ë¡œ ë‚˜ê°€ë©´ ê¸°ë¡ ë¬´íš¨(ì¢…ë£Œ) ì²˜ë¦¬ë©ë‹ˆë‹¤.</div>

<div class="leaderboard">
  <h2>ë¦¬ë”ë³´ë“œ</h2>
  <div class="medals">
    <div class="medal" id="first">ğŸ¥‡</div>
    <div class="medal" id="second">ğŸ¥ˆ</div>
    <div class="medal" id="third">ğŸ¥‰</div>
  </div>
  <ul class="rank-list" id="rankList"></ul>
</div>

<script>
  const holes = document.querySelectorAll('.hole');
  const scoreEl = document.getElementById('score');
  const timeEl = document.getElementById('time');
  const startBtn = document.getElementById('startBtn');

  let score = 0;
  let time = 30;
  let gameTimer = null;
  let moleTimer = null;
  let isPlaying = false;
  let cheated = false;

  // ë¦¬ë”ë³´ë“œ ë°ì´í„°: ì˜ˆì‹œ ì—†ìŒ (ë¹ˆ ìƒíƒœ ì‹œì‘)
  const leaderboardData = [];

  function randomHole() {
    return holes[Math.floor(Math.random() * holes.length)];
  }

  function showMole() {
    if (!isPlaying) return;
    const hole = randomHole();
    hole.classList.add('up');
    setTimeout(() => hole.classList.remove('up'), 600);
  }

  holes.forEach(hole => {
    hole.addEventListener('click', () => {
      if (!hole.classList.contains('up') || !isPlaying) return;
      score++;
      scoreEl.textContent = score;
      hole.classList.remove('up');
    });
  });

  function startGame() {
    // ì´ë¯¸ í”Œë ˆì´ ì¤‘ì´ë©´ ë¬´ì‹œ
    if (isPlaying) return;

    score = 0;
    time = 30;
    cheated = false;
    isPlaying = true;

    scoreEl.textContent = score;
    timeEl.textContent = time;

    moleTimer = setInterval(showMole, 800);

    gameTimer = setInterval(() => {
      time--;
      timeEl.textContent = time;
      if (time <= 0) endGame(false);
    }, 1000);
  }

  function endGame(isCheat) {
    if (!isPlaying) return;

    isPlaying = false;
    clearInterval(gameTimer);
    clearInterval(moleTimer);
    holes.forEach(h => h.classList.remove('up'));

    if (isCheat) {
      alert("ğŸš« ê¸°ë¡ ë¬´íš¨!\nê²Œì„ ì¤‘ í™”ë©´ì„ ë²—ì–´ë‚˜ì„œ ì¢…ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
      return;
    }

    alert(`ê²Œì„ ì¢…ë£Œ! ì ìˆ˜: ${score}`);
    updateLeaderboard(score);
  }

  function updateLeaderboard(newScore) {
    const name = prompt("ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”", "ìµëª…");
    if (!name) return;

    leaderboardData.push({ name, score: newScore });
    leaderboardData.sort((a, b) => b.score - a.score);

    document.getElementById("first").textContent =
      leaderboardData[0] ? `ğŸ¥‡ ${leaderboardData[0].name}` : "ğŸ¥‡";

    document.getElementById("second").textContent =
      leaderboardData[1] ? `ğŸ¥ˆ ${leaderboardData[1].name}` : "ğŸ¥ˆ";

    document.getElementById("third").textContent =
      leaderboardData[2] ? `ğŸ¥‰ ${leaderboardData[2].name}` : "ğŸ¥‰";

    const rankList = document.getElementById("rankList");
    rankList.innerHTML = "";

    for (let i = 3; i < Math.min(10, leaderboardData.length); i++) {
      const li = document.createElement("li");
      li.textContent = `${i + 1}. ${leaderboardData[i].name} - ${leaderboardData[i].score}`;
      rankList.appendChild(li);
    }
  }

  // âœ… ê¼¼ìˆ˜ ë°©ì§€: íƒ­ ìˆ¨ê¹€/ë‹¤ë¥¸ ì°½/í° í™”ë©´ ì „í™˜ ì‹œ ê¸°ë¡ ë¬´íš¨ ì¢…ë£Œ
  document.addEventListener("visibilitychange", () => {
    if (isPlaying && document.hidden) endGame(true);
  });

  window.addEventListener("blur", () => {
    if (isPlaying) endGame(true);
  });

  // ì‹œì‘ ë²„íŠ¼
  startBtn.addEventListener('click', startGame);
</script>

</body>
</html>
